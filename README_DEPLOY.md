# Deploy и форма заявок (Vercel Free)

Проект использует:
- статическую страницу [`index.html`](index.html)
- serverless endpoint [`api/lead.js`](api/lead.js)

## Что уже реализовано

- AJAX-отправка формы из [`index.html`](index.html)
- Endpoint [`/api/lead`](api/lead.js) с:
  - валидацией полей
  - антиспамом (honeypot + ограничение частоты + защита от слишком быстрой отправки)
  - отправкой email через Resend API
- Сообщение об успешной отправке:
  - «Спасибо за обращение. Менеджер ответит вам в ближайшее время и свяжется с вами.»

## ENV-переменные (Vercel Project Settings → Environment Variables)

Обязательные:

- `RESEND_API_KEY` — ключ Resend
- `LEAD_TO_EMAIL` — почта получателя заявок
- `LEAD_FROM_EMAIL` — адрес отправителя (подтверждённый в Resend домен), например `leads@yourdomain.ru`

Для вашего случая:

- `LEAD_TO_EMAIL=buskin@internet.ru`

Опционально:

- `TURNSTILE_SECRET_KEY` — не указывать сейчас (Turnstile отключён)

## Настройка Resend

1. Создать аккаунт Resend.
2. Подтвердить домен отправителя (SPF + DKIM).
3. Получить API key.
4. Добавить 3 env-переменные в Vercel.

## Юридический минимум и безопасность

- В форме добавлено обязательное согласие на обработку персональных данных.
- Добавьте/проверьте публичную страницу политики конфиденциальности в футере.
- Не храните персональные данные в логах.
- Ключи только в env-переменных, не в клиентском JS.

## Деплой на Vercel (free)

Используйте skill-скрипт деплоя:

```bash
bash /mnt/skills/user/vercel-deploy/scripts/deploy.sh .
```

После успешного деплоя получите:
- Preview URL
- Claim URL

## Проверка после деплоя

1. Открыть сайт по Preview URL.
2. Отправить тестовую заявку из формы.
3. Убедиться, что письмо пришло на `buskin@internet.ru`.
4. Проверить ошибки в случае невалидных данных/частых запросов.

